[(#SET{defaut_tri, #ARRAY{
	identifiant, 1,
	titre, 1,
	id_mot, 1,
	points, -1
}})
]
#SET{typologie_arbo, ''}
[(#CONFIG{svptype/typologies/#ENV{typologie}/mots_arborescents}|=={oui}|oui)
	#SET{typologie_arbo, oui}
]
#SET{affectations, 0}
#SET{title_modifier, #VAL{svptype:}|concat{#ENV{typologie}_modifier_title}|_T}

<B_liste_types>
#ANCRE_PAGINATION
<div class="liste-objets types_plugins[ (#ENV{typologie})]">
<table class="spip liste">
	[<caption>
		<strong class="caption">(#ENV*{titre})</strong>
		[(#GET{typologie_arbo}|oui)
		<div class="filtre">
			<form method="GET" action="#SELF" onChange="this.submit(); return true;">
				[(#SELF|parametre_url{type,''}|form_hidden)]
				[(#SAISIE{selection_type_plugin, type,
					typologie=#ENV{typologie},
					niveau_affiche=racine,
					option_intro=#ENV{option_intro}, class='toto'
				})]
			</form>
		</div>]
	</caption>]
	<thead>
		<tr class="first_row">
			<th class="titre" scope="col">[(#TRI{titre,<:svptype:identifiant_label:>,ajax})]</th>
			<th class="nombre" scope="col">[(#TRI{type,<:svptype:plugin_compteur_label:>,ajax})]</th>
			<th class="id" scope="col">[(#TRI{id_mot,<:info_numero_abbreviation:>,ajax})]</th>
			<th class="action" scope="col">&nbsp;</th>
		</tr>
	</thead>
	<tbody>
<BOUCLE_liste_types(MOTS)
	{id_groupe=#CONFIG{svptype/typologies/#ENV{typologie}/id_groupe}}
	{where?}
	{recherche?}
	{tri #ENV{par, identifiant}, #GET{defaut_tri}}
	{pagination #ENV{nb,100}}>
		<tr class="[(#COMPTEUR_BOUCLE|alterner{row_odd,row_even})][(#GET{typologie_arbo}|et{#PROFONDEUR|=={0}}|oui) racine]">
			<td class="titre principale">
				<a href="[(#ID_MOT|generer_url_entite{mot})]" title="<:info_numero_abbreviation|attribut_html:> #ID_MOT">
				[(#GET{typologie_arbo}|et{#ENV{type}|non}|oui)
					[(#PROFONDEUR|mostar_tabulation)]
				]
					#IDENTIFIANT
				</a>
			</td>
			<td class="nombre">
				#SET{affectations_mot, #ENV{typologie}|type_plugin_compter_affectations{#ID_MOT|}}
				[(#GET{affectations_mot})]
			</td>
			<td class="id">
			[(#AUTORISER{modifier, typeplugin, #ID_MOT}|?{
				<a href="[(#URL_ECRIRE{type_plugin_edit}|parametre_url{id_mot, #ID_MOT})]"
				   class="bouton-modifier"
				   data-action="modifier"[
				   title="(#GET{title_modifier}|attribut_html)"]>
					#ID_MOT
				</a>,
				#ID_MOT
			})]
			</td>
			<td class="action">
			[(#AUTORISER{supprimer, typeplugin, #ID_MOT}|oui)
				[(#BOUTON_ACTION{supprimer,#URL_ACTION_AUTEUR{supprimer_mot,#ID_MOT,#SELF},ajax,'','','(function(me){$(me).parents("tr").animateRemove();return true;})(this)'})]
			]
			</td>
		</tr>
		[(#GET{typologie_arbo}|non|ou{#GET{typologie_arbo}|et{#PROFONDEUR|>{0}}}|oui)
			#SET{affectations, #GET{affectations}|plus{#GET{affectations_mot}}}
		]
</BOUCLE_liste_types>
	</tbody>
	<tfoot>
		<tr class="first_row racine">
			<th class="titre" scope="col"><:info_total|ucfirst:></th>
			<th class="nombre" scope="col">#GET{affectations}</th>
			<th class="id" scope="col">&nbsp;</th>
			<th class="action" scope="col">&nbsp;</th>
		</tr>
	</tfoot>
</table>
[<p class="pagination">(#PAGINATION{prive})</p>]
</div>
</B_liste_types>[
<div class="liste-objets types_plugins[ (#ENV{typologie})] caption-wrap">
	<strong class="caption">(#ENV*{sinon,''})</strong>
</div>
]<//B_liste_types>
